<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Firebase Auth Demo</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <div class="container">
        <h1>üè† Welcome</h1>
        <p class="subtitle">Firebase Authentication Demo</p>
        
        <div id="user-info" class="hidden">
            <img id="user-photo" src="" alt="Profile" class="profile-photo">
            <div class="profile-info">
                <p><strong>Name:</strong> <span id="user-name"></span></p>
                <p><strong>Email:</strong> <span id="user-email"></span></p>
                <p><strong>Provider:</strong> <span id="user-provider"></span></p>
            </div>
            
            <button onclick="window.location.href='profile.html'" class="btn btn-primary">
                üë§ View Profile
            </button>
            <button onclick="window.location.href='logout.html'" class="btn btn-danger">
                üö™ Logout
            </button>
        </div>
        
        <div id="guest-info">
            <p class="text-center">Please login to access your account</p>
            <button onclick="window.location.href='login.html'" class="btn btn-primary">
                üîë Login
            </button>
            <button onclick="window.location.href='signup.html'" class="btn btn-secondary">
                üìù Sign Up
            </button>
            
            <div class="divider">or continue with</div>
            
            <button id="googleLogin" class="btn btn-google">
                <img src="https://img.icons8.com/color/16/000000/google-logo.png" alt="Google">
                Continue with Google
            </button>
            <button id="githubLogin" class="btn btn-github">
                <img src="https://img.icons8.com/ios-filled/16/ffffff/github.png" alt="GitHub">
                Continue with GitHub
            </button>
        </div>
        
        <div class="nav-links">
            <a href="login.html" class="nav-link">Login</a>
            <a href="signup.html" class="nav-link">Sign Up</a>
            <a href="profile.html" class="nav-link">Profile</a>
            <a href="logout.html" class="nav-link">Logout</a>
        </div>
    </div>

    <script src="auth.js"></script>
    <script>
        // Initialize auth
        initAuth((user) => {
            const userInfo = document.getElementById('user-info');
            const guestInfo = document.getElementById('guest-info');
            
            if (user) {
                // User is logged in
                document.getElementById('user-name').textContent = user.displayName || user.email;
                document.getElementById('user-email').textContent = user.email;
                document.getElementById('user-provider').textContent = user.providerData[0]?.providerId || 'email';
                document.getElementById('user-photo').src = user.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.displayName || user.email)}&background=667eea&color=fff`;
                
                userInfo.classList.remove('hidden');
                guestInfo.classList.add('hidden');
            } else {
                // User is not logged in
                userInfo.classList.add('hidden');
                guestInfo.classList.remove('hidden');
            }
        });

        // Google Login
        document.getElementById('googleLogin').addEventListener('click', async () => {
            const result = await loginWithGoogle();
            if (result.success) {
                window.location.href = 'profile.html';
            } else {
                alert('Error: ' + result.error);
            }
        });

        // GitHub Login
        document.getElementById('githubLogin').addEventListener('click', async () => {
            const result = await loginWithGitHub();
            if (result.success) {
                window.location.href = 'profile.html';
            } else {
                alert('Error: ' + result.error);
            }
        });
    </script>
</body>
</html>
